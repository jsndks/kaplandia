{#
 # Layout template
 # ---------------
 #
 # This template defines your site’s global layout. It can be
 # “extended” by other templates to fill in the gaps.
 #
 # See Twig’s Template Inheritance documentation for more details:
 # http://twig.sensiolabs.org/doc/templates.html#template-inheritance
 #}

<!DOCTYPE html>
<html class="no-js" lang="en-us">
<head>
    <!-- META DATA -->
    <meta charset="utf-8" />
    <meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no' />
    <!--[if IE]>
    <meta http-equiv="cleartype" content="on" />
    <![endif]-->

    <!-- SEO -->
    <title>{% if title is defined %}{{ title }} - {% endif %}{{ siteName }}</title>
    <meta name="description" content="" />
    <meta name="author" content="" />

    <!-- ICONS -->
    <link rel="shortcut icon" type="image/ico" href="{{ siteUrl }}_static/web/assets/media/images/favicon.ico" />
    <link rel="apple-touch-icon" href="{{ siteUrl }}_static/web/assets/media/images/apple-touch-icon.png" />

    <!-- FONTS -->
    <link href='http://fonts.googleapis.com/css?family=Josefin+Sans' rel='stylesheet' type='text/css'>

    <!-- STYLESHEETS -->
    <link rel="stylesheet" media="screen, projection" href="{{ siteUrl }}_static/web/assets/styles/modern.css" />
    <!--[if lte IE 8]>
        <link rel="stylesheet" type="text/css" media="screen, projection" href="{{ siteUrl }}_static/web/assets/styles/legacy.css" />
    <![endif]-->

    <!-- ANALYTICS -->
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-43682517-1', 'kaplandia.com');
      ga('send', 'pageview');
    </script>

    <!-- MAPBOX - TMP -->
    <script src='https://api.tiles.mapbox.com/mapbox.js/v1.6.2/mapbox.js'></script>
    <link href='https://api.tiles.mapbox.com/mapbox.js/v1.6.2/mapbox.css' rel='stylesheet' />
</head>

<body>
    <!-- CONTENT -->
    <div class="site">
        <div class="site-hd" role="banner">
            <ul class="utilNav">
                <li class="utilNav-item">
                    <a href="{{ url('blog') }}" class="btn">Blog</a>
                </li>
                <li class="utilNav-item">
                    <a href="{{ url('map') }}" class="btn btn_sub">Map</a>
                </li>
            </ul>
        </div> <!-- /site-hd -->

        <div class="site-bd" role="main">
            {% block content %}
                <p>If you see me, you haven’t set your <code>{% verbatim %}{% block content %}…{% endblock %}{% endverbatim %}</code> yet.</p>
                <p>See Twig’s <a href="http://twig.sensiolabs.org/doc/templates.html#template-inheritance">Template Inheritance</a> documentation for an explanation.</p>
            {% endblock %}
        </div> <!-- /site-bd -->

        <div class="site-ft" role="contentinfo"></div> <!-- /site-ft -->
    </div> <!-- /site -->

    <!-- JAVASCRIPT -->
    <script src="{{ siteUrl }}_static/web/assets/vendor/requirejs/require.js"></script>
    <script src="{{ siteUrl }}_static/web/assets/scripts/config.js"></script>
    <script>
        /**
         * Global constants
         *
         * TODO: ideally these values would be filled in from the server side
         *
         * @class SETTINGS
         * @static
         */
        window.SETTINGS = {};

        /**
         * Indicates whether we are running on a production environment
         *
         * @property IS_PRODUCTION
         * @type Boolean
         * @final
         */
        SETTINGS.IS_PRODUCTION = false;

        /**
         * Appended to query string for versioning of network resources (CSS,
         * JavaScript, etc). This version number should be updated in production
         * for every release.
         *
         * @property APP_VERSION
         * @type {String}
         * @final
         */
        SETTINGS.APP_VERSION = '';

         /**
         * Set to true to allow application to output to browser console, false
         * to silence all console output. This should be set to `false` on
         * production.
         *
         * @property LOG_CONSOLE
         * @type Boolean
         * @final
         */
        SETTINGS.LOG_CONSOLE = !SETTINGS.IS_PRODUCTION;

        /**
         * Appended to query string to defeat caching of network resources (CSS,
         * JavaScript, etc). Should be set to '' on production
         *
         * @property CACHE_BUSTER
         * @type String
         * @final
         */
        SETTINGS.CACHE_BUSTER = SETTINGS.IS_PRODUCTION ? '' : '&bust=' + Math.random();

        /**
         * Root path for all JavaScript files
         *
         * @property SCRIPT_PATH
         * @type String
         * @final
         */
        SETTINGS.SCRIPT_PATH = '{{ siteUrl }}_static/web/assets/scripts/';

        /**
         * Set any RequireJs configuration that is dependent on dynamic
         * configuration variables. Note that this config data is merged into
         * any other require.config() statements defined elsewhere.
         */
        require.config({
            // Script path
            baseUrl: SETTINGS.SCRIPT_PATH,

            // Params to append to the end of each js file request
            urlArgs: 'v=' + SETTINGS.APP_VERSION + SETTINGS.CACHE_BUSTER
        });

        /**
         * Set route and kick off RequireJs, which begins loading of scripts
         * starting from main.js.
         */
        require(['main']);
    </script>
</body>
</html>
